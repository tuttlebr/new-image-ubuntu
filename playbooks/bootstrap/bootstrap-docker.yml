---
- hosts: all
  name: Setup Docker
  become: true
  ignore_errors: true
  tags:
  - docker
  tasks:
    - name: download docker install runfile
      get_url:
        url: https://get.docker.com
        force: true
        dest: /root/get-docker.sh
        mode: '0100'
    - name: execute docker installation script
      ansible.builtin.command: /root/get-docker.sh
    - name: set docker user permissions
      ansible.builtin.command: usermod -aG docker {{ ansible_user }}